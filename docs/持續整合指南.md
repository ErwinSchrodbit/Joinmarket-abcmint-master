# 持續整合指南（GitHub Actions）

## 環境變數與 Secrets
- `ABCMINT_RPC_HOST`：ABCMint RPC 主機名稱或 IP
- `ABCMINT_RPC_PORT`：ABCMint RPC 埠
- `ABCMINT_RPC_USER`：RPC 使用者名稱
- `ABCMINT_RPC_PASSWORD`：RPC 密碼
- `ABCMINT_RUN_E2E`：設為 `1` 以在 CI 中執行端到端測試

建議將以上敏感資訊存入存放庫或組織層級的 Secrets，並在工作流程中透過 `env` 注入。

## 工作流程位置
- 專案提供範例工作流程：`joinmarket_abcmint/.github/workflows/tests.yml`

## 範例設定片段
```yaml
name: ABCMint Adapter CI
on:
  push:
  pull_request:
jobs:
  tests:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.12'
      - name: Install dependencies
        run: |
          pip install -r joinmarket_abcmint/service/requirements.txt
          pip install -r joinmarket_abcmint/requirements_launcher.txt
          pip install -e joinmarket_abcmint/joinmarket-clientserver-master[test]
      - name: Run tests
        env:
          ABCMINT_RPC_HOST: ${{ secrets.ABCMINT_RPC_HOST }}
          ABCMINT_RPC_PORT: ${{ secrets.ABCMINT_RPC_PORT }}
          ABCMINT_RPC_USER: ${{ secrets.ABCMINT_RPC_USER }}
          ABCMINT_RPC_PASSWORD: ${{ secrets.ABCMINT_RPC_PASSWORD }}
          ABCMINT_RUN_E2E: '1'
        run: |
          python -m pytest -q joinmarket_abcmint/test
```

## 說明
- 若未配置真實節點，可暫時關閉 `ABCMINT_RUN_E2E`，僅執行適配層的單元測試。
- Windows 環境建議使用 PowerShell 撰寫步驟；若切換至 Linux Runner，需調整路徑分隔與相依套件安裝命令。
