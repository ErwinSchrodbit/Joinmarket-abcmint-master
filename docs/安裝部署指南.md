# 安裝與部署指南

本指南面向開發者與運維，描述兩種使用方式：終端用戶使用已打包的啟動器，以及在開發環境中自原始碼執行服務/打包。

## 終端用戶（推薦）
- 直接執行：Release 資產 `JoinMarket-ABCMint-LauncherV1.0.0.exe`
- 使用步驟與常見問題：見 `joinmarket_abcmint/docs/啟動器使用指南.md`

## 開發環境準備
- Python：`Python 3.12`
- 相依套件安裝：
  ```powershell
  pip install -r joinmarket_abcmint/service/requirements.txt
  pip install -r joinmarket_abcmint/requirements_launcher.txt
  pip install -e joinmarket_abcmint/joinmarket-clientserver-master[test]
  ```
- 執行路徑匯入：確保以下路徑於執行時可匯入：
  - `joinmarket_abcmint/service`
  - `joinmarket_abcmint/joinmarket-clientserver-master/src`
  於 PowerShell 臨時設定：
  ```powershell
  $env:PYTHONPATH="$(Resolve-Path joinmarket_abcmint/service);$(Resolve-Path joinmarket_abcmint/joinmarket-clientserver-master/src)"
  ```

## 本地節點與設定
- ABCMint/相容 Bitcoin 節點需啟用 JSON‑RPC 並允許本機存取（預設 `127.0.0.1`）。
- RPC 參數：`host/port/user/password` 與節點設定一致，埠預設 `8332`。
- 啟動器設定儲存位置：`%LOCALAPPDATA%\JoinMarket-ABCMint\launcher_config.json`

## 自原始碼執行
### 啟動後端服務
```powershell
python joinmarket_abcmint/service/start_service.py
```
環境變數（範例）：
```powershell
$env:ABCMINT_RPC_HOST="127.0.0.1"
$env:ABCMINT_RPC_PORT="8332"
$env:ABCMINT_RPC_USER="youruser"
$env:ABCMINT_RPC_PASSWORD="yourpass"
```
啟動後存取：`http://localhost:5000`

### 啟動 GUI 啟動器（腳本版）
```powershell
python joinmarket_abcmint/launcher.py
```
填寫 RPC 參數後點擊 `[ INITIALIZE LINK ]`，成功將自動開啟 Web UI。

## 打包與發佈
- 規範檔：`joinmarket_abcmint/JoinMarket-ABCMint-LauncherV1.0.0.spec`
- 使用 PyInstaller 進行打包，可重現基本流程：
  ```powershell
  pyinstaller joinmarket_abcmint/JoinMarket-ABCMint-LauncherV1.0.0.spec
  ```
- 建置產物輸出至 `joinmarket_abcmint/dist/` 與 `joinmarket_abcmint/build/`。
- 發佈前建議：固定相依套件版本、記錄建置環境與指令、提供 SHA256 校驗值並可選進行程式碼簽章。

## 測試
- 適配層與端到端測試位於 `joinmarket_abcmint/test/`，可按需執行。
- CI 設定參考：`joinmarket_abcmint/.github/workflows/tests.yml` 與 `joinmarket_abcmint/docs/持續整合指南.md`
