# ABCMint Mix Launcher 使用指南

本指南介紹 `JoinMarket-ABCMint-LauncherV1.0.0.exe` 的適用範圍、安裝與執行、介面與參數、設定儲存、常見問題與排查，以及版本與發行資訊。

## 適用範圍與前置條件
- 本機需執行已啟用 JSON‑RPC 的 ABCMint/相容 Bitcoin 節點，`127.0.0.1` 可存取。
- 預設 RPC 埠為 `8332`，可依節點設定調整。
- 終端用戶建議直接使用已打包的 EXE，無需安裝 Python 或額外依賴。

## ABCMINT全节点配置
### Windows 開放 8332 埠分步教程
1. **打開 Windows 防火牆高級設定**
   - 按下 `Win + R` 鍵，輸入 `wf.msc` 並按 Enter
   - 在左側面板點擊「入站規則」

2. **建立新的入站規則**
   - 在右側面板點擊「新增規則」
   - 規則類型選擇「埠」，點擊「下一步」
   - 選擇「TCP」，然後在「特定本機埠」中輸入 `8332`，點擊「下一步」
   - 操作選擇「允許連線」，點擊「下一步」
   - 設定檔保持預設（網域、私人、公用全選），點擊「下一步」
   - 名稱輸入「ABCMINT RPC 8332」，描述可選，點擊「完成」

3. **驗證埠是否開放**
   - 按下 `Win + R` 鍵，輸入 `cmd` 並按 Enter
   - 在命令提示字元中輸入 `netstat -an | findstr :8332`
   - 若看到類似 `TCP    0.0.0.0:8332           0.0.0.0:0              LISTENING` 的輸出，說明埠已成功開放

## 下載與校驗
- 可執行檔：Release 資產 `JoinMarket-ABCMint-LauncherV1.0.0.exe`
- 使用 PowerShell 進行 SHA256 校驗（在下載目錄中執行）：
  ```powershell
  Get-FileHash -Path ".\JoinMarket-ABCMint-LauncherV1.0.0.exe" -Algorithm SHA256 | Select-Object -ExpandProperty Hash
  ```
- 或使用 `certutil`：
  ```powershell
  certutil -hashfile "JoinMarket-ABCMint-LauncherV1.0.0.exe" SHA256
  ```
- 目前 SHA256 校驗值：`8B21AAF4A8437D7D42477DAF08E599313577D8EC44500819E3A31580667DFC3D`

## 快速開始
1. 以滑鼠雙擊 `JoinMarket-ABCMint-LauncherV1.0.0.exe` 啟動 GUI。
2. 在視窗中填寫：
   - `RPC Port`（預設 `8332`）
   - `RPC User`
   - `RPC Password`
3. 點擊 `[ INITIALIZE LINK ]` 進行連線測試並啟動服務。
4. 連線成功後會自動開啟 `http://localhost:5000` 的 Web 介面，系統托盤常駐以便管理。

## 介面與操作
- 欄位與行為：
  - `RPC Port`、`RPC User`、`RPC Password`，密碼輸入為隱藏模式。
  - 點擊 `[ INITIALIZE LINK ]` 後程式會先進行 RPC 連線測試，失敗將彈窗提示並記錄原因。
- 系統托盤選單：
  - `Show Interface` 顯示視窗。
  - `Open Web UI` 開啟 `http://localhost:5000`。
  - `Terminate` 結束並移除托盤圖示。
- 視窗關閉行為：關閉時最小化到系統托盤而非立即結束，可在托盤中管理。
- 日誌輸出：視窗底部文字區域顯示執行日誌與提示訊息。

## 設定與儲存
- 設定檔路徑：`%LOCALAPPDATA%\JoinMarket-ABCMint\launcher_config.json`
- 啟動時會自動載入該設定；初始化前會儲存目前輸入。
- 環境變數設定：
  - `ABCMINT_RPC_HOST=127.0.0.1`
  - `ABCMINT_RPC_PORT`、`ABCMINT_RPC_USER`、`ABCMINT_RPC_PASSWORD` 來自視窗輸入（埠空缺時預設 `8332`）。

## 服務與埠
- 後端服務由 `waitress` 托管，監聽 `0.0.0.0:5000`，瀏覽器存取位址為 `http://localhost:5000`。
- 連線測試會對節點 `http://127.0.0.1:<RPC_PORT>` 進行 JSON‑RPC 呼叫驗證。

## 常見問題與排查
- 驗證失敗（401）：檢查 `RPC User`/`RPC Password` 是否與節點設定一致。
- 連線失敗：確認節點已啟動並啟用 RPC、埠正確、`127.0.0.1` 可存取、防火牆已開放 `8332` 埠（參考「ABCMINT全节点配置」章節）。
- 埠占用：若 `5000` 已被其他程式占用，關閉相關程式或調整服務埠後重試（目前版本固定為 `5000`）。
- 單一執行實例限制：若彈窗提示已在執行，請檢查系統托盤是否存在圖示並透過托盤選單操作。
- 瀏覽器無法開啟：於瀏覽器手動存取 `http://localhost:5000`，並確認服務正在監聽；必要時重啟啟動器。
- 重設設定：刪除 `%LOCALAPPDATA%\JoinMarket-ABCMint\launcher_config.json` 可清空已儲存參數。

## 建置與版本資訊
- 原始碼檔案：`joinmarket_abcmint\launcher.py`
- 打包規範：`joinmarket_abcmint\JoinMarket-ABCMint-LauncherV1.0.0.spec`
- 版本展示：
  - 可執行檔名稱：`JoinMarket-ABCMint-LauncherV1.0.0.exe`
  - GUI 標題：`ABCMint Mix Launcher // V.1.0`
- 上游 JoinMarket 版本參考：`JM_CORE_VERSION = '0.9.12dev'`（位於上游原始碼）。
- 可重現建置建議：固定 Python 版本與相依套件，記錄打包命令與環境，提供校驗雜湊並可選進行程式碼簽章。

## 安全與隱私
- RPC 憑據僅用於本地連線並保存在使用者目錄設定檔中，請妥善管理主機與帳號權限。
- 啟動後密碼輸入會被鎖定以避免誤修改，結束後可於下次啟動前調整。

## 授權與致謝
- 請在倉庫根目錄提供專案授權說明，並致謝上游 JoinMarket 專案及相關相依。
